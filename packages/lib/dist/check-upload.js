!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("checkUpload",[],t):"object"==typeof exports?exports.checkUpload=t():e.checkUpload=t()}(self,(function(){return function(){"use strict";var e={d:function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function o(e,t,o,r,i){return new Promise((s=>{if(/^\[object File]$/.test(Object.prototype.toString.call(e))){let n="";const a=e.name.lastIndexOf(".");-1!==a&&(n=e.name.substring(a));const p=n?n.substring(1):e.type&&e.type.split("/")[0];if(!p&&/^\[object String]$/.test(Object.prototype.toString.call(t))&&""!==t)s({message:`只能上传${t}!`,error:2,validation:!1});else if(isNaN(Number(o))&&(o=/^\.(png|jpe?g|gif|svg|webp)/i.test(n)||/^image/.test(e.type)?10240:/^\.(ogg|mp3|wav|flac|aac)/i.test(n)||/^audio/.test(e.type)?102400:/^\.(mp4|webm)/i.test(n)||/^video/.test(e.type)?10485760:1024e3),o&&e.size/1024>Number(o))s({message:`上传${p}大小不能超过${o>=1024?o/1024+"M":`${o}KB`}!`,error:3,validation:!1});else if("string"!=typeof t||""===t||t.split(",").some((t=>(t=t.trim())&&(new RegExp(`^${t}`,"i").test(e.type)||new RegExp(`^${t}`,"i").test(n)))))if(!/^\.(png|jpe?g|gif|svg|webp)/i.test(n)&&!/^image/.test(e.type)||isNaN(Number(r))&&isNaN(Number(i)))s({message:"",error:0,validation:!0});else{const t=new Image;t.onload=function(){let e="";!isNaN(Number(r))&&t.width>Number(r)&&(e+=`图片宽度不能超过${r}`),!isNaN(Number(i))&&t.height>Number(i)&&(e&&(e+="，"),e+=`图片高度不能超过${i}`),s(e?{message:e,error:5,validation:!1}:{message:"",error:0,validation:!0})},t.onerror=function(){s({message:"无法获取图片宽度高度",error:6,validation:!1})},t.src=URL.createObjectURL(e)}else s({message:`只能上传${t}!`,error:4,validation:!1})}else s({message:"file参数必须为File数据类型",error:1,validation:!1})}))}return e.d(t,{default:function(){return o}}),t.default}()}));